version: 1
default_environment: dev
project_id: meltanolabs-evidence-ext
plugins:
  utilities:
    - name: evidence
      namespace: evidence
      # pip_url: git+https://github.com/meltanolabs/evidence-ext.git@main
      pip_url: -e .
      executable: evidence_extension
      commands:
        describe:
          executable: evidence_extension
          args: describe
        initialize:
          executable: evidence_extension
          args: initialize
        invoke:
          executable: evidence_extension
          args: invoke
      settings:
        - name: evidence_home
          label: Evidence Home
          value: $MELTANO_PROJECT_ROOT/analyze/evidence
          env: EVIDENCE_HOME
          description: |
            The directory where Evidence will store its project, configuration, logs, and other files.
        - name: evidence.database
          env: EVIDENCE_DATABASE
        - name: evidence.credentials.filename
          env: EVIDENCE_CREDENTIALS_FILENAME
        - name: evidence.credentials.gitignore_duckdb
          env: EVIDENCE_CREDENTIALS_GITIGNORE_DUCKDB
      settings_group_validation:
        - - evidence_home
        # duckdb
        - - evidence_home
          - evidence.database
          - evidence.credentials.filename
      config:
        evidence_home: sample/
environments:
- name: dev
- name: test
  config:
    plugins:
      utilities:
        - name: evidence
          config:
            evidence.database: duckdb
            evidence.credentials.filename: needful_things.duckdb
            evidence.credentials.gitignore_duckdb: null
- name: prod
